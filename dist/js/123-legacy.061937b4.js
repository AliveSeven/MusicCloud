"use strict";(self["webpackChunkcloud_music"]=self["webpackChunkcloud_music"]||[]).push([[123],{4123:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"left"},[a("img",{attrs:{src:t.pic,alt:""}})]),a("div",{staticClass:"right"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"密码登录",name:"login-one"}},[a("form",{attrs:{action:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"tel",attrs:{type:"text",placeholder:"请输入手机号",oninput:"value=value.replace(/^\\.+|[^\\d.]/g,'')"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),a("div",{staticClass:"code-wrap"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"code",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),a("div",{staticClass:"btn-wrap"},[a("div",{staticClass:"btn-register"},[a("el-button",[t._v("注册")])],1),a("div",{staticClass:"btn-login"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.loginByPhone()}}},[t._v("登录")])],1)])]),a("el-tab-pane",{attrs:{label:"短信登录",name:"login-two"}},[a("form",{attrs:{action:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"tel",attrs:{type:"text",placeholder:"请输入手机号",oninput:"value=value.replace(/^\\.+|[^\\d.]/g,'')"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),a("div",{staticClass:"code-wrap"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.captcha,expression:"captcha"}],staticClass:"code",attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:t.captcha},on:{input:function(e){e.target.composing||(t.captcha=e.target.value)}}}),a("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){return t.sentLoginCode()}}},[t._v("获取验证码")])],1)]),a("div",{staticClass:"btn-wrap"},[a("div",{staticClass:"btn-register"},[a("el-button",[t._v("注册")])],1),a("div",{staticClass:"btn-login"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.loginByPhoneCode()}}},[t._v("登录")])],1)])])],1),t._m(0)],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"other-wrap"},[a("span",[t._v("其他方式登录")])])}],s=a(4367),i=a(7496),c=a(6294),r={data:function(){return{activeName:"login-one",phone:"",password:"",captcha:"",pic:"https://www.xdocin.com/xdoc?_key=4usklvd325aqbbzk2tcofoquoe&_func=down&_dir=login.jpg",user:{username:"",avater:"",userid:""}}},computed:(0,s.Z)({},(0,c.mapState)(["userInfo","isLogin"])),created:function(){},methods:(0,s.Z)((0,s.Z)({},(0,c.mapMutations)(["updataUsrInfo","updateLogin","updataToken","updataCookie"])),{},{handleClick:function(t){},loginByPhone:function(){var t=this,e={phone:this.phone,password:this.password};(0,i.ix)(e).then((function(e){200==e.data.code?t.success(e):(t.fail(),console.log("登录失败，密码或者账号错误")),console.log("手机密码登录",e)})).catch((function(t){return t}))},loginByPhoneCode:function(){var t=this,e={phone:this.phone,captcha:this.captcha};(0,i.JC)(e).then((function(e){200==e.data.code?t.success(e):t.fail(),console.log("手机验证码登录",e)})).catch((function(t){return t}))},sentLoginCode:function(){var t={phone:this.phone};(0,i.tQ)(t).then((function(t){console.log("发送验证码",t)}))},loginStatus:function(){var t=this;(0,i.Ff)().then((function(e){200==e.data.data.code&&t.$router.push(0)}))},success:function(t){this.$message({message:"登录成功",type:"success"}),this.user.username=t.data.profile.nickname,this.user.avater=t.data.profile.avatarUrl,this.user.userid=t.data.profile.userId,this.$store.commit("updataToken",t.data.token),this.$store.commit("updataCookie",t.data.cookie),this.$store.commit("updataUsrInfo",this.user),this.$store.commit("updateLogin",!0),this.$router.push("/userInfo")},fail:function(){this.$message({message:"登录失败，账号密码或者验证码错误",type:"error"})}})},l=r,u=a(3736),p=(0,u.Z)(l,o,n,!1,null,"3eb6f834",null),d=p.exports}}]);
//# sourceMappingURL=123-legacy.061937b4.js.map