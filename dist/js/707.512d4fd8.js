"use strict";(self["webpackChunkcloud_music"]=self["webpackChunkcloud_music"]||[]).push([[707],{1707:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-container"},[e("div",{staticClass:"left"},[e("img",{attrs:{src:t.pic,alt:""}})]),e("div",{staticClass:"right"},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"密码登录",name:"login-one"}},[e("form",{attrs:{action:""}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"tel",attrs:{type:"text",placeholder:"请输入手机号",oninput:"value=value.replace(/^\\.+|[^\\d.]/g,'')"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),e("div",{staticClass:"code-wrap"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"code",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),e("div",{staticClass:"btn-wrap"},[e("div",{staticClass:"btn-register"},[e("el-button",[t._v("注册")])],1),e("div",{staticClass:"btn-login"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.loginByPhone()}}},[t._v("登录")])],1)])]),e("el-tab-pane",{attrs:{label:"短信登录",name:"login-two"}},[e("form",{attrs:{action:""}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"tel",attrs:{type:"text",placeholder:"请输入手机号",oninput:"value=value.replace(/^\\.+|[^\\d.]/g,'')"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),e("div",{staticClass:"code-wrap"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.captcha,expression:"captcha"}],staticClass:"code",attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:t.captcha},on:{input:function(e){e.target.composing||(t.captcha=e.target.value)}}}),e("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){return t.sentLoginCode()}}},[t._v("获取验证码")])],1)]),e("div",{staticClass:"btn-wrap"},[e("div",{staticClass:"btn-register"},[e("el-button",[t._v("注册")])],1),e("div",{staticClass:"btn-login"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.loginByPhoneCode()}}},[t._v("登录")])],1)])])],1),t._m(0)],1)])},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"other-wrap"},[e("span",[t._v("其他方式登录")])])}],n=a(2413),i=a(6294),r={data(){return{activeName:"login-one",phone:"",password:"",captcha:"",pic:"https://www.xdocin.com/xdoc?_key=4usklvd325aqbbzk2tcofoquoe&_func=down&_dir=login.jpg",user:{username:"",avater:"",userid:""}}},computed:{...(0,i.mapState)(["userInfo","isLogin"])},created(){},methods:{...(0,i.mapMutations)(["updataUsrInfo","updateLogin","updataToken","updataCookie"]),handleClick(t){},loginByPhone(){let t={phone:this.phone,password:this.password};(0,n.ix)(t).then((t=>{200==t.data.code?this.success(t):(this.fail(),console.log("登录失败，密码或者账号错误")),console.log("手机密码登录",t)})).catch((t=>t))},loginByPhoneCode(){let t={phone:this.phone,captcha:this.captcha};(0,n.JC)(t).then((t=>{200==t.data.code?this.success(t):this.fail(),console.log("手机验证码登录",t)})).catch((t=>t))},sentLoginCode(){let t={phone:this.phone};(0,n.tQ)(t).then((t=>{console.log("发送验证码",t)}))},loginStatus(){(0,n.Ff)().then((t=>{200==t.data.data.code&&this.$router.push(0)}))},success(t){this.$message({message:"登录成功",type:"success"}),this.user.username=t.data.profile.nickname,this.user.avater=t.data.profile.avatarUrl,this.user.userid=t.data.profile.userId,this.$store.commit("updataToken",t.data.token),this.$store.commit("updataCookie",t.data.cookie),this.$store.commit("updataUsrInfo",this.user),this.$store.commit("updateLogin",!0),this.$router.push("/userInfo")},fail(){this.$message({message:"登录失败，账号密码或者验证码错误",type:"error"})}}},c=r,l=a(2349),p=(0,l.Z)(c,s,o,!1,null,null,null),u=p.exports}}]);
//# sourceMappingURL=707.512d4fd8.js.map