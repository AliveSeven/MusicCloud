"use strict";(self["webpackChunkcloud_music"]=self["webpackChunkcloud_music"]||[]).push([[54],{4054:function(t,s,a){a.r(s),a.d(s,{default:function(){return c}});var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"mv-container"},[a("div",{staticClass:"mv-wrap"},[a("h3",[t._v("MV详情")]),a("div",{staticClass:"video-wrap"},[a("video",{attrs:{controls:"",src:t.mvUrl}},[t._v(" 抱歉，您的浏览器不支持内嵌视频，不过不用担心，你可以 "),a("a",{attrs:{href:"https://www.baidu.com"}},[t._v("下载")]),t._v(" 并用你喜欢的播放器观看! ")])]),a("div",{staticClass:"info-wrap"},[a("div",{staticClass:"singer-info"},[a("div",{staticClass:"avatar-wrap"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.artistAvatarUrl,expression:"artistAvatarUrl"}],attrs:{alt:""}})]),a("span",{staticClass:"name"},[t._v(t._s(t.mvInfo.artistName))])]),a("div",{staticClass:"mv-info"},[a("h2",{staticClass:"title"},[t._v(t._s(t.mvInfo.name))]),a("span",{staticClass:"date"},[t._v("发布："+t._s(t.mvInfo.publishTime))]),a("span",{staticClass:"number"},[t._v("播放："+t._s(t.mvInfo.playCount)+" 次")]),a("p",{staticClass:"desc"},[t._v(t._s(t.mvInfo.desc))])])]),0!=t.hotComments.length?a("div",{staticClass:"comment-wrap"},[a("p",{staticClass:"title"},[t._v(" 热门评论"),a("span",{staticClass:"number"},[t._v("("+t._s(t.hotComments.length)+") ")])]),a("div",{staticClass:"comments-wrap"},t._l(t.hotComments,(function(s,e){return a("div",{key:e,staticClass:"item"},[a("div",{staticClass:"icon-wrap"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.user.avatarUrl,expression:"item.user.avatarUrl"}],attrs:{alt:""}})]),a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"content"},[a("span",{staticClass:"name"},[t._v(t._s(s.user.nickname)+"：")]),a("span",{staticClass:"comment"},[t._v(t._s(s.content))])]),0!=s.beReplied.length?a("div",{staticClass:"re-content"},[a("span",{staticClass:"name"},[t._v(t._s(s.beReplied[0].user.nickname)+"：")]),a("span",{staticClass:"comment"},[t._v(t._s(s.beReplied[0].content))])]):t._e(),a("div",{staticClass:"date"},[t._v(t._s(t._f("LocaleString")(s.time)))]),a("span",{staticClass:"iconfont icon-zan float-right"},[t._v(t._s(s.likedCount))])])])})),0)]):t._e(),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingComments,expression:"loadingComments"}],staticClass:"comment-wrap"},[a("p",{staticClass:"title"},[t._v(" 最新评论"),a("span",{staticClass:"number"},[t._v("("+t._s(this.total)+")")])]),a("div",{staticClass:"comments-wrap"},t._l(t.comments,(function(s,e){return a("div",{key:e,staticClass:"item"},[a("div",{staticClass:"icon-wrap"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.user.avatarUrl,expression:"item.user.avatarUrl"}],attrs:{alt:""}})]),a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"content"},[a("span",{staticClass:"name"},[t._v(" "+t._s(s.user.nickname)+" ：")]),a("span",{staticClass:"comment"},[t._v(t._s(s.content))])]),s.beReplied[0]?a("div",{staticClass:"re-content"},[a("span",{staticClass:"name"},[t._v(t._s(s.beReplied[0].user.nickname)+"：")]),a("span",{staticClass:"comment"},[t._v(t._s(s.beReplied[0].content))])]):t._e(),a("div",{staticClass:"date"},[t._v(t._s(t._f("LocaleString")(s.time)))])])])})),0),a("el-pagination",{attrs:{"hide-on-single-page":!0,background:"","current-page":t.page,"page-size":t.pageSize,"pager-count":5,layout:" prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)]),a("div",{staticClass:"mv-recommend"},[a("h3",{staticClass:"title"},[t._v("相关推荐")]),a("div",{staticClass:"mvs"},[a("div",{staticClass:"items"},t._l(t.recommendMvs,(function(s,e){return a("div",{key:e,staticClass:"item",on:{click:function(a){return t.toMvDetail(s.id)}}},[a("div",{staticClass:"img-wrap"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.cover,expression:"item.cover"}],attrs:{alt:""}}),a("span",{staticClass:"iconfont icon-play"}),a("div",{staticClass:"num-wrap"},[a("div",{staticClass:"iconfont icon-play"}),a("div",{staticClass:"num"},[t._v(t._s(t._f("ellipsisPlayVolume")(s.playCount)))])]),a("span",{staticClass:"time"},[t._v(t._s(t._f("formatDuration")(s.duration)))])]),a("div",{staticClass:"info-wrap"},[a("div",{staticClass:"name"},[t._v(t._s(s.name))]),a("div",{staticClass:"singer"},[t._v(t._s(s.artistName))])])])})),0)])])])},i=[],n=a(7496),l={name:"mv",data(){return{mvId:"",mvUrl:"",recommendMvs:[],mvInfo:{},artistAvatarUrl:"",hotComments:[],comments:[],total:0,pageSize:10,page:1,loading:!0,loadingComments:!1}},watch:{$route(t){this.searchMV(t.query.q)}},created(){let t=this.$route.query.q;this.mvId=t,this.searchMV(t)},methods:{toMvDetail(t){this.$router.push(`/mv?q=${t}`)},handleCurrentChange(t){this.page=t,this.getComments()},getComments(){this.loadingComments=!0;let t={id:this.$route.query.q,limit:this.pageSize,offset:(this.page-1)*this.pageSize};(0,n.hE)(t,"mv").then((t=>{Object.prototype.hasOwnProperty.call(t.data,"hotComments")&&(this.hotComments=t.data.hotComments),this.comments=t.data.comments,this.total=this.mvInfo.commentCount-this.hotComments.length})).then((()=>{this.loadingComments=!1}))},searchMV(t){this.loading=!0;let s={id:t};(0,n.Tz)(s).then((t=>{this.mvUrl=t.data.data.url})),(0,n.FR)({mvid:t}).then((t=>{this.recommendMvs=t.data.mvs})),(0,n.Uw)({mvid:t}).then((t=>{this.mvInfo=t.data.data,this.GetArtistDetail(this.mvInfo.artists[0].id),this.getComments()})).then((()=>{this.loading=!1}))},GetArtistDetail(t){(0,n.Ik)({id:t},"detail").then((t=>{this.artistAvatarUrl=t.data.data.artist.cover}))}}},r=l,m=a(3736),o=(0,m.Z)(r,e,i,!1,null,"4f48c716",null),c=o.exports}}]);
//# sourceMappingURL=54.a189c8f9.js.map