"use strict";(self["webpackChunkcloud_music"]=self["webpackChunkcloud_music"]||[]).push([[35],{1035:function(t,a,s){s.r(a),s.d(a,{default:function(){return d}});var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"result-container",attrs:{"element-loading-background":"rgba(0, 0, 0, 0)"}},[a("div",{staticClass:"title-wrap"},[a("h2",{staticClass:"title"},[t._v(t._s(t.keywords))]),a("span",{staticClass:"sub-title"},[t._v("找到 "+t._s(t.total)+" 个结果")])]),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"歌曲",name:"first"}},[a("table",{staticClass:"el-table"},[a("thead",[a("th"),a("th",[t._v("音乐标题")]),a("th",[t._v("歌手")]),a("th",[t._v("专辑")]),a("th",[t._v("时长")])]),a("tbody",t._l(t.songsList,(function(s,e){return a("tr",{key:e,staticClass:"el-table__row",on:{dblclick:function(a){return t.PlayMusic(s)}}},[a("td",[t._v(t._s(t.pageSize*(t.page-1)+e+1))]),a("td",[a("div",{staticClass:"song-wrap"},[a("div",{staticClass:"name-wrap"},[a("div",{staticClass:"first-title"},[t._v(t._s(s.name)),0!=s.mvid?a("span",{staticClass:"iconfont icon-mv"}):t._e()]),0!=s.alia.length?a("div",{staticClass:"second-title"},[t._v(t._s(s.alia[0]))]):t._e()])])]),a("td",[t._v(t._s(s.ar[0].name))]),a("td",[t._v(t._s(s.al.name))]),a("td",[t._v(t._s(t._f("formatDuration")(s.dt)))])])})),0)])]),a("el-tab-pane",{attrs:{label:"歌单",name:"second"}},[a("div",{staticClass:"items"},t._l(t.playList,(function(s,e){return a("div",{key:e,staticClass:"item",on:{click:function(a){return t.toPlaylist(s.id)}}},[a("div",{staticClass:"img-wrap"},[a("div",{staticClass:"num-wrap"},[t._v(" 播放量: "),a("span",{staticClass:"num"},[t._v(t._s(t._f("ellipsisPlayVolume")(s.playCount)))])]),a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.coverImgUrl,expression:"item.coverImgUrl"}],attrs:{alt:""}}),a("span",{staticClass:"iconfont icon-play"})]),a("p",{staticClass:"name"},[t._v(t._s(s.name))])])})),0)]),a("el-tab-pane",{attrs:{label:"MV",name:"third"}},[a("div",{staticClass:"items mv"},t._l(t.mvList,(function(s,e){return a("div",{key:e,staticClass:"item",on:{click:function(a){return t.toMV(s.id)}}},[a("div",{staticClass:"img-wrap"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.cover,expression:"item.cover"}],attrs:{alt:""}}),a("span",{staticClass:"iconfont icon-play"}),a("div",{staticClass:"num-wrap"},[a("div",{staticClass:"iconfont icon-play"}),a("div",{staticClass:"num"},[t._v(t._s(t._f("ellipsisPlayVolume")(s.playCount)))])]),a("span",{staticClass:"time"},[t._v(t._s(t._f("formatDuration")(s.duration)))])]),a("div",{staticClass:"info-wrap"},[a("div",{staticClass:"name"},[t._v(t._s(s.name))]),a("div",{staticClass:"singer"},[t._v(t._s(s.artistName))])])])})),0)])],1),a("el-pagination",{attrs:{"hide-on-single-page":!0,background:"","current-page":t.page,"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.currentPageChange}})],1)},i=[],l=s(6294),n=s(1833),r={name:"result",data(){return{keywords:"",activeName:"first",songsList:[],playList:[],mvList:[],page:1,total:0,pageSize:10,type:1,showAddBall:!1}},created(){this.keywords=this.$route.query.q,this.getTableData()},watch:{$route(t){this.keywords=t.query.q,this.total=0,this.page=1,this.getTableData(this.type)}},methods:{...(0,l.mapActions)(["getAudio"]),currentPageChange(t){this.page=t,this.getTableData(this.type)},handleClick(t){let a=t.label;switch(a){case"歌曲":this.total=0,this.page=1,this.type=1,this.pageSize=10,this.getTableData();break;case"歌单":this.total=0,this.page=1,this.type=1e3,this.pageSize=10,this.getTableData(this.type);break;case"MV":this.total=0,this.page=1,this.type=1004,this.pageSize=8,this.getTableData(this.type);break}},getTableData(t=1){let a={keywords:this.keywords,limit:this.pageSize,offset:(this.page-1)*this.pageSize,type:t};(0,n.OF)(a).then((a=>{let s=[];switch(t){case 1:s=a.data.result.songs,0==this.total&&(this.total=a.data.result.songCount),this.songsList=s;break;case 1e3:s=a.data.result.playlists,0==this.total&&(this.total=a.data.result.playlistCount),this.playList=s;break;case 1004:s=a.data.result.mvs,0==this.total&&(this.total=a.data.result.mvCount),this.mvList=s;break}}))},PlayMusic(t){(0,n.mo)({id:t.id}).then((a=>{null!=a.data.data[0].url?(this.$store.dispatch("saveSongUrl",a.data.data[0].url),(0,n.oN)({ids:t.id}).then((t=>{this.$store.dispatch("changePlayState",!0),this.$store.dispatch("saveSongDetail",t.data.songs[0]),this.$store.dispatch("addPlayinglist",t.data.songs[0])}))):this.$message({message:"暂时没有版权播放，换首试试",type:"warning",center:!0})})).catch((t=>{console.log(t),this.$message({message:"暂时没有版权播放，换首试试",type:"warning",center:!0})}))},toPlaylist(t){this.$router.push(`/playlist?q=${t}`)},toMV(t){this.$router.push(`/mv?q=${t}`)}}},o=r,c=s(2349),h=(0,c.Z)(o,e,i,!1,null,null,null),d=h.exports}}]);
//# sourceMappingURL=35.d9fb0aca.js.map