"use strict";(self["webpackChunkcloud_music"]=self["webpackChunkcloud_music"]||[]).push([[831],{4831:function(t,a,s){s.r(a),s.d(a,{default:function(){return m}});var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"playlist-container"},[a("div",{staticClass:"top-wrap"},[a("div",{staticClass:"img-wrap"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.playlist.coverImgUrl,expression:"playlist.coverImgUrl"}],attrs:{alt:""}})]),a("div",{staticClass:"info-wrap"},[a("p",{staticClass:"title"},[t._v(t._s(t.playlist.name))]),a("div",{staticClass:"author-wrap"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.playlist.creator.avatarUrl,expression:"playlist.creator.avatarUrl"}],staticClass:"avatar"}),a("span",{staticClass:"name"},[t._v(t._s(t.playlist.creator.nickname))]),a("span",{staticClass:"time"},[t._v(t._s(t._f("LocaleDateString")(t.playlist.createTime))+" 创建")])]),a("div",{staticClass:"play-wrap"},[a("span",{staticClass:"iconfont icon-circle-play"}),a("span",{staticClass:"text",on:{click:t.PlayAll}},[t._v("播放全部")])]),a("div",{staticClass:"tag-wrap"},[a("span",{staticClass:"title"},[t._v("标签:")]),a("ul",t._l(t.playlist.tags,(function(s,e){return a("li",{key:e},[t._v(" "+t._s(s)+" ")])})),0)]),a("div",{staticClass:"desc-wrap"},[a("span",{staticClass:"title"},[t._v("简介:")]),a("span",{staticClass:"desc"},[t._v(" "+t._s(t.playlist.description)+" ")])])])]),a("el-tabs",{model:{value:t.activeIndex,callback:function(a){t.activeIndex=a},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"歌曲列表",name:"1"}},[a("table",{staticClass:"el-table playlist-table"},[a("thead",[a("th"),a("th"),a("th",[t._v("音乐标题")]),a("th",[t._v("歌手")]),a("th",[t._v("专辑")]),a("th",[t._v("时长")])]),a("tbody",t._l(t.playlist.tracks,(function(s,e){return a("tr",{key:e,staticClass:"el-table__row",on:{dblclick:function(a){return t.PlayMusic(s)}}},[a("td",[t._v(t._s(e+1))]),a("td",[a("div",{staticClass:"img-wrap"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.al.picUrl,expression:"item.al.picUrl"}],attrs:{alt:""}}),a("span",{staticClass:"iconfont icon-play",on:{click:function(a){return t.PlayMusic(s)}}})])]),a("td",[a("div",{staticClass:"song-wrap"},[a("div",{staticClass:"name-wrap"},[a("span",[t._v(t._s(s.name))]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加到播放列表",enterable:!1,placement:"bottom"}},[a("span",{staticClass:"iconfont add-music icon-add-list",on:{click:function(a){return t.AddMusic(s)}}})])],1)])]),a("td",[t._v(t._s(s.ar[0].name))]),a("td",[t._v(t._s(s.al.name))]),a("td",[t._v(t._s(t._f("formatDuration")(s.dt)))])])})),0)])]),a("el-tab-pane",{attrs:{label:"评论("+(t.commentInfo.total+t.commentInfo.hotComments.length)+")",name:"2"}},[t.commentInfo.hotComments.length>0?a("div",{staticClass:"comment-wrap"},[a("p",{staticClass:"title"},[t._v(" 热门评论"),a("span",{staticClass:"number"},[t._v(t._s(t.commentInfo.hotComments.length))])]),a("div",{staticClass:"comments-wrap"},t._l(t.commentInfo.hotComments,(function(s,e){return a("div",{key:e,staticClass:"item"},[a("div",{staticClass:"icon-wrap"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.user.avatarUrl,expression:"item.user.avatarUrl"}],attrs:{alt:""}})]),a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"content"},[a("span",{staticClass:"name"},[t._v(t._s(s.user.nickname)+"：")]),a("span",{staticClass:"comment"},[t._v(t._s(s.content))])]),s.beReplied[0]?a("div",{staticClass:"re-content"},[a("span",{staticClass:"name"},[t._v(" "+t._s(s.beReplied[0].user.nickname)+"：")]),a("span",{staticClass:"comment"},[t._v(" "+t._s(s.beReplied[0].content)+" ")])]):t._e(),a("div",{staticClass:"date"},[a("span",[t._v(" "+t._s(t._f("LocaleDateString")(s.time))+" ")]),a("span",{staticClass:"iconfont icon-zan float-right"},[t._v(" "+t._s(s.likedCount)+" ")])])])])})),0)]):t._e(),t.commentInfo.comments.length>0?a("div",{staticClass:"comment-wrap"},[a("p",{staticClass:"title"},[t._v(" 最新评论"),a("span",{staticClass:"number"},[t._v(t._s(t.commentInfo.total))])]),a("div",{staticClass:"comments-wrap"},t._l(t.commentInfo.comments,(function(s,e){return a("div",{key:e,staticClass:"item"},[a("div",{staticClass:"icon-wrap"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.user.avatarUrl,expression:"item.user.avatarUrl"}],attrs:{alt:""}})]),a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"content"},[a("span",{staticClass:"name"},[t._v(t._s(s.user.nickname)+"：")]),a("span",{staticClass:"comment"},[t._v(t._s(s.content))])]),s.beReplied[0]?a("div",{staticClass:"re-content"},[a("span",{staticClass:"name"},[t._v(t._s(s.beReplied[0].user.nickname)+"：")]),a("span",{staticClass:"comment"},[t._v(t._s(s.beReplied[0].content))])]):t._e(),a("div",{staticClass:"date"},[t._v(t._s(t._f("LocaleDateString")(s.time)))])])])})),0)]):t._e(),a("el-pagination",{attrs:{"hide-on-single-page":!0,background:"","current-page":t.page,"page-sizes":[5,10,20,30,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.commentInfo.total},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)},i=[],n=s(1833),l={name:"playlist",data(){return{activeIndex:"1",total:0,page:1,playlist:{creator:{avatarUrl:""}},commentInfo:{comments:[],hotComments:[],total:0}}},created(){this.GetLists(),this.GetComments()},methods:{PlayMusic(t){(0,n.mo)({id:t.id}).then((a=>{null!=a.data.data[0].url?(this.$store.dispatch("saveSongUrl",a.data.data[0].url),(0,n.oN)({ids:t.id}).then((t=>{this.$store.dispatch("changePlayState",!0),this.$store.dispatch("saveSongDetail",t.data.songs[0]),this.$store.dispatch("addPlayinglist",t.data.songs[0])}))):this.$message({message:"暂时没有版权播放，换首试试",type:"warning",center:!0})})).catch((t=>{console.log(t),this.$message({message:"暂时没有版权播放，换首试试",type:"warning",center:!0})}))},AddMusic(t){this.$store.dispatch("addPlayinglist",t),this.$message({message:"已添加到播放列表",type:"success",center:!0})},handleCurrentChange(t){this.page=t,this.GetComments()},async GetLists(){let t={id:this.$route.query.q,limit:10,offset:10*(this.page-1)};(0,n.E4)(t).then((t=>{this.playlist=t.data.playlist}))},AddAplayer(){},PlayAll(){},async GetComments(){let t={id:this.$route.query.q,limit:10,offset:10*(this.page-1)};(0,n.hE)(t,"playlist").then((t=>{if(this.page>1)this.commentInfo.comments=t.data.comments;else{let a={comments:t.data.comments,total:t.data.total};a.hotComments=t.data.hotComments||t.data.topComments,this.commentInfo=a}}))}}},c=l,o=s(2349),r=(0,o.Z)(c,e,i,!1,null,null,null),m=r.exports}}]);
//# sourceMappingURL=831.9f6433a2.js.map